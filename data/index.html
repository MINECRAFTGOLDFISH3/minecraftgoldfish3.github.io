<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Save/Load | minecraftgoldfish3.github.io</title>
        <link rel="stylesheet" href="../css/style.css" />
    </head>
    <body>
        <div id="center">
            <br />
            <h1>Save/Load your Data</h1> <hr />
            <h2>Saving your site data:</h2>
            <p>Your actions on the site are automatically saved as <a href="../miscellaneous/cookies.html">cookies.</a></p><p>Although this is the case, your site data will get deleted in about <b>30</b> days with no site activity. To manually save your data, click on the button below.</p>
            <p><b>Note:</b> this does not save your game data.</p>
            <button class="big-btn" onclick="save()">Save</button>
            <h2>Loading your site data:</h2>
            <p>Click on your 'data.txt' file and edit it. Select all the text. Then, copy this text. Paste it in the textbox below, and click load.</p>
            <p><b>Warning:</b> this will override all current site data. Make sure that you are loading the correct file.</p>
            <input type="text" name="cookie-input" id="cookie-input" /><br />
            <button class="big-btn" onclick="load()">Load</button>
            <h2>Resetting your site data:</h2>
            <p>Make sure to back up your data before doing this.</p>
            <button class="big-btn" onclick="reset()">Reset Everything</button>
            <div class="spacer300"></div><div class="spacer300"></div>
        </div>
        <footer>
            <a href="/">Back to Homepage</a>
        </footer>
        <script>
            function getCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(";");
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == " ") c = c.substring(1, c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
                }
                return null;
            }
            function setCookie(name, value, days) {
                var expires = "";
                if (days) {
                    var date = new Date();
                    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
                    expires = "; expires=" + date.toUTCString();
                }
                document.cookie = name + "=" + (value || "") + expires + "; path=/";
            }
            function eraseCookie(name) {
                document.cookie = name + "=; Max-Age=-99999;";
            }
            const save = () => {
                const link = document.createElement("a");
                var content = getCookie('data');
                const file = new Blob([content], { type: 'text/plain' });
                link.href = URL.createObjectURL(file);
                link.download = "data.txt";
                link.click();
                URL.revokeObjectURL(link.href);
            }
            function load() {
                if (confirm('Are you sure you want to replace your site data with this value?') == true) {
                    setCookie('data', document.getElementById('cookie-input').value, 30);
                    confirm('Success, your data has been replaced.');
                }
            }
            function reset() {
                if (confirm('Are you sure you want to reset your site data?') == true) {
                    eraseCookie('data');
                    confirm('Success, your data has been reset.');
                    window.location.href = '/';
                }
            }
        </script>
        <script src="/js/main.js"></script>
    </body>
</html>